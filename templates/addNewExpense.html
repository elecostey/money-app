{% extends "index.html" %}
{% block content %}
<div class="panel panel-default">
    <div class="panel-heading">
      <h3>Oups! I spent money again!</h3>
    </div>
  <div class="panel-body">
    <form action="/addNewExpense" method="POST">

      <div class="form-group">
        <label for="date" class="control-label">Date</label>
        <input class="form-control" type="date" name="date" value="{{ date }}">
      </div>

      <div class="form-group">
        <label for="amount" class="control-label">Amount</label>
        <input class="form-control" type="text" name="amount" value="{{ amount }}">
      </div>

      <div class="form-group">
        <label for="cards" class="control-label">Card</label>
        <select class="form-control" name="cards">
          <option value="Maestro">Maestro</option>
          <option value="Diners">Diners</option>
        </select>
      </div>

      <div class="form-group">
        <label for="transactionType" class="control-label">Card</label>
        <select class="form-control" name="transactionType">
          <option value="Expense">Expense</option>
          <option value="Income">Income</option>
        </select>
      </div>

      <button
        class="btn btn-primary"
        type="submit">
          Submit
      </button>

    </form>
  </div>
  </div>

  <div class="panel panel-default">
  <div class="panel-heading">
    <span id='expenses-title'>My expenses in {{ selectedMonthName }} </span>
    {% if balance >= 0 %}
      <span class='positive' id='balance'>{{ formatPrice(balance) }}</span>
    {% elif 0 > balance >= -5000 %}
      <<span class='low' id='balance'>{{ formatPrice(balance) }}</span>
    {% else %}
      <<span class='very-low' id='balance'>{{ formatPrice(balance) }}</span>
    {% endif %}

    <form action="/changeMonth" method="POST">
      <div id='form-group-expenses-title'class="form-group">
        <label for="months" class="control-label">Month</label>
        <select class="form-control" name="months">
          {% for month in months %}
          <option value="{{ month[1] }}" {% if month[1] == currentMonth %} selected {% endif %}>{{ month[0] }}</option>
          {% endfor %}
        </select>
      </div>
      <button
        class="btn btn-primary"
        type="submit">
          Submit
      </button>
    </form>
  </div>
  <div class="panel-body">
    <table class="table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Amount</th>
          <th>Card</th>
        </tr>
      </thead>
      <tbody>
        {% for transaction in transactions %}
        <tr>
          <td>{{ convertDateTimeToReadable(transaction[0]) }}</td>
          {% if transaction[4] == 'Expense' %}
            <td id=expense><span>-</span>{{ formatPrice(transaction[1]) }}</td>
          {% else %}
            <td id=income><span >+</span>{{ formatPrice(transaction[1]) }}</td>
          {% endif %}
          <td>{{ transaction[3] }}</td>
        </tr>
        {% endfor %}

      </tbody>
    </table>


  </div>
</div>
<script>
function myFunction() {
    var x = document.getElementById("mySelect").value;
    document.getElementById("demo").innerHTML = "You selected: " + x;
}
</script>
{% endblock %}
